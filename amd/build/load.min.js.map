{"version":3,"file":"load.min.js","sources":["../src/load.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Loads CSS for Editor\n *\n * @module     mod_newsletter/load_CSS\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nvar M = {\n    mod_newsletter: {}\n};\n\nM.mod_newsletter.collapse_subscribe_form = function () {\n    var fieldset = document.querySelector('form #id_subscribe');\n    if (fieldset) {\n        fieldset.classList.add('collapsed');\n    }\n};\n\nM.mod_newsletter.init_editor = function (stylesheets, selected) {\n    /**\n     * Comment later\n     * @param {Object} e\n     */\n    function change_stylesheet(e) {\n        var select = e.target;\n        var selectedIndex = select.value;\n        document.querySelectorAll('head link').forEach(function (node) {\n            node.remove();\n        });\n        var link1 = document.createElement('link');\n        link1.type = 'text/css';\n        link1.rel = 'stylesheet';\n        link1.href = stylesheets[0];\n        document.head.appendChild(link1);\n        var link2 = document.createElement('link');\n        link2.type = 'text/css';\n        link2.rel = 'stylesheet';\n        link2.href = stylesheets[selectedIndex];\n        document.head.appendChild(link2);\n    }\n\n    var select = document.querySelector('#id_stylesheetid');\n    if (select) {\n        select.addEventListener('change', change_stylesheet);\n    } else {\n        setTimeout(function () {\n            M.mod_newsletter.init_editor(stylesheets, selected);\n        }, 100);\n    }\n};\n\n\n"],"names":["M","mod_newsletter","collapse_subscribe_form","fieldset","document","querySelector","classList","add","init_editor","stylesheets","selected","select","addEventListener","e","selectedIndex","target","value","querySelectorAll","forEach","node","remove","link1","createElement","type","rel","href","head","appendChild","link2","setTimeout"],"mappings":";;;;;;;AAuBA,IAAIA,EAAI,CACJC,eAAgB,IAGpBD,EAAEC,eAAeC,wBAA0B,eACnCC,SAAWC,SAASC,cAAc,sBAClCF,UACAA,SAASG,UAAUC,IAAI,cAI/BP,EAAEC,eAAeO,YAAc,SAAUC,YAAaC,cAuB9CC,OAASP,SAASC,cAAc,oBAChCM,OACAA,OAAOC,iBAAiB,mBApBDC,OAEnBC,cADSD,EAAEE,OACYC,MAC3BZ,SAASa,iBAAiB,aAAaC,SAAQ,SAAUC,MACrDA,KAAKC,gBAELC,MAAQjB,SAASkB,cAAc,QACnCD,MAAME,KAAO,WACbF,MAAMG,IAAM,aACZH,MAAMI,KAAOhB,YAAY,GACzBL,SAASsB,KAAKC,YAAYN,WACtBO,MAAQxB,SAASkB,cAAc,QACnCM,MAAML,KAAO,WACbK,MAAMJ,IAAM,aACZI,MAAMH,KAAOhB,YAAYK,eACzBV,SAASsB,KAAKC,YAAYC,UAO1BC,YAAW,WACP7B,EAAEC,eAAeO,YAAYC,YAAaC,YAC3C"}